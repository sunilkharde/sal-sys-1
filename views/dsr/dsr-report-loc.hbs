{{!-- <div class="container"> --}}
    <div style="padding-right: 25px; padding-left: 25px; padding-top: 10px;">
        <div id="printable-area">

            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h4 style=" margin-bottom: 20px;">Employee Location Report...</h4>
                {{!-- {{#isEqual user.user_role "Admin" "Dealer"}}
                <a href="/dealerPay/create" class="btn btn-success">Create New</a>
                {{else}}
                <a href="#" class="btn btn-secondary">Create New</a>
                {{/isEqual}} --}}

                <div>
                    {{!-- <form id="form2" action="/dsr/loc-export-csv" method="GET" class="d-inline">
                        <input hidden required type="month" id="exportCSV_curMon" name="exportCSV_curMon"
                            value="{{curMon}}" min="{{minDate}}" max="{{maxDate}}">
                        <input hidden id="exportCSV_empID" name="exportCSV_empID" value="{{empData.emp_id}}">
                        <button type="submit" id="expor-csv" class="btn btn-warning">Export to CSV</button>
                    </form> --}}
                    {{!-- {{#isEqual dsrSum.post_mg "Y" }}
                    <form id="form3" action="/dsr/atten-export-pdf" method="GET" class="d-inline">
                        <input hidden required type="month" id="exportPDF_curMon" name="exportPDF_curMon"
                            value="{{curMon}}" min="{{minDate}}" max="{{maxDate}}">
                        <input hidden required id="exportPDF_empID" name="exportPDF_empID" value="{{empData.emp_id}}">
                        <button type="submit" id="expor-pdf" class="btn btn-danger">Export to PDF</button>
                    </form>
                    {{/isEqual}} --}}
                </div>

            </div>

            <form id="form1" action="/dsr/report-loc" method="GET">
                {{!-- <div class="col-lg-9 border p-4"> --}}
                    {{!-- <div class="form-group row mb-3"> --}}

                        <div class="row mb-2">
                            <label for="loc_date" class="col-sm-2 col-form-label">Date&nbsp;<span
                                    style="color: red;">*</span></label>
                            <div class="col-sm-4">
                                <input required type="datetime-local" class="form-control" id="loc_date" name="loc_date"
                                    value="{{locToDate}}">
                            </div>
                            <div class="col-md-4 item-align-start">
                                <button type="submit" id="getLocationButton" class="btn btn-success">Refresh
                                    Data</button>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <label for="emp_id" class="col-sm-2 col-form-label">Employee</label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input hidden type="text" class="form-control" id="emp_id" name="emp_id"
                                        value="{{empData.emp_id}}">
                                    <input readonly type="text" class="form-control" id="emp_name" name="emp_name"
                                        value="{{#if empData.emp_name}} {{empData.emp_name}} {{else}}---: All Employee :---{{/if}}">
                                    <button class="btn btn-outline-secondary" type="button" id="btnEmp"
                                        data-bs-toggle="modal" data-bs-target="#empModal"> <i
                                            class="bi bi-list"></i></button>
                                    <button class="btn btn-outline-secondary" type="button" id="resetBtn">Reset</button>
                                </div>
                            </div>
                        </div>

                        {{!--
                    </div> --}}
                    {{!-- </div> --}}

                <br>
                {{!-- <div id="map" style="height: 800px;"> </div> --}}
                <div id="map" style="height: 60vh;"></div>
                <br>

            </form>

        </div>
    </div>

    <script>
        function initMap() {
            const locations = JSON.parse('{{{locations}}}');
            console.log('Location ', locations);

            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 5,
                center: { lat: 19.565143, lng: 74.206182 },
            });

            locations.forEach(location => {
                //console.log("Location: ", location);
                const marker = new google.maps.Marker({
                    position: new google.maps.LatLng(location.loc_lat, location.loc_lng),
                    map: map,
                    title: location.emp_name + ' ' + location.loc_time,
                    //label: location.loc_name, // Display the name as a label on the marker
                    label: {
                        text: location.emp_name + ' ' + location.loc_time,
                        fontWeight: 'bold', // Make the label text bold
                        fontSize: '15px',   // Change the font size
                        color: 'blue'        // Change the text color
                    }
                });
            });
        }
    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key={{googleApiKey}}&callback=initMap">
    </script>

    <script>
        $(document).ready(function () {
            /*$('#attenDataTable').dataTable({
                pageLength: 50,
                responsive: true,
                "order": [[2, "asc"], [0, "asc"]]
            });*/

            $('#resetBtn').on('click', function () {
                $('#emp_id').val('');
                $('#emp_name').val('---: All Employee :---');
            });

        });

        // Update the hidden input fields when the form is submitted
        $('#form1').on('submit', function (event) {
            event.preventDefault();
            var loc_date = $('#loc_date').val();
            var emp_id = $('#emp_id').val();
            $('#exportCSV_curMon').val(loc_date);
            $('#exportCSV_empID').val(emp_id);
            this.submit();
        });
    </script>

    
    {{> _lov-emp}}